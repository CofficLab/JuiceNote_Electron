<h1 id="heading-1">setnx</h1><h2 id="heading-2">简介</h2><p>setnx 是 "SET if Not eXists" 的缩写。</p><p>用于设置key=value，条件是key不存在。</p><h2 id="heading-3">语法</h2><p><code>SETNX key value</code></p><h2 id="heading-4">例子</h2><p>set the key "username" to "John" only if that key does not already exist.</p><pre index="1"><code language="shell" run="1">redis-cli SETNX username "John"
redis-cli SETNX username "Jane" </code></pre><p>If the key "username" did not exist, it will now be set to "John" and the command will return 1.</p><p>If the key already existed, no operation is performed and the command returns 0.</p><p>This can be useful for a few reasons:</p><p>1. Distributing locks - You can use SETNX to set a "lock" on a key, and other clients will only be able to set the lock if it's not already taken.<br>2. Unique counters - You can increment a counter with SETNX, and only the first client will be able to set it.<br>3. Rate limiting - You can use SETNX to set an expiration on a key only if it's not already set, to limit the frequency of an operation.</p>