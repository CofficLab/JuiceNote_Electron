# 几个网络模块

标准库中有很多网络模块，其他地方也有不少。有些网络模块明显主要是处理网络的，但还 有几个其实也是与网络相关的，如处理各种数据编码以便通过网络传输的模块。这里精挑细选了 几个模块进行介绍。

## socket

网络编程中的一个基本组件是套接字(socket)。套接字基本上是一个信息通道，两端各有一
个程序。这些程序可能位于(通过网络相连的)不同的计算机上，通过套接字向对方发送信息。 在 Python 中，大多数网络编程都隐藏了模块 socket 的基本工作原理，不与套接字直接交互。
套接字分为两类:服务器套接字和客户端套接字。创建服务器套接字后，让它等待连接请求 的到来。这样，它将在某个网络地址(由 IP 地址和端口号组成)处监听，直到客户端套接字建立 连接。随后，客户端和服务器就能通信了。
客户端套接字处理起来通常比服务器端套接字容易些，因为服务器必须准备随时处理客户端 连接，还必须处理多个连接;而客户端只需连接，完成任务后再断开连接即可。本章后面将介绍 如何使用 SocketServer 等类和 Twisted 框架进行服务器端编程。
套接字是模块 socket 中 socket 类的实例。实例化套接字时最多可指定三个参数:一个地址族 (默认为 socket.AF_INET);是流套接字(socket.SOCK_STREAM，默认设置)还是数据报套接字 (socket.SOCK_DGRAM);协议(使用默认值 0 就好)。创建普通套接字时，不用提供任何参数。
服务器套接字先调用方法 bind，再调用方法 listen 来监听特定的地址。然后，客户端套接字 就可连接到服务器了，办法是调用方法 connect 并提供调用方法 bind 时指定的地址(在服务器端， 可使用函数 socket.gethostname 获取当前机器的主机名)。这里的地址是一个格式为(host, port) 的元组，其中 host 是主机名(如www.example.com)，而port是端口号(一个整数)。方法listen接 受一个参数——待办任务清单的长度(即最多可有多少个连接在队列中等待接纳，到达这个数量 后将开始拒绝连接)。
服务器套接字开始监听后，就可接受客户端连接了，这是使用方法 accept 来完成的。这个方 法将阻断(等待)到客户端连接到来为止，然后返回一个格式为(client, address)的元组，其中 client 是一个客户端套接字，而 address 是前面解释过的地址。服务器能以其认为合适的方式处 理客户端连接，然后再次调用 accept 以接着等待新连接到来。这通常是在一个无限循环中完成的。
为传输数据，套接字提供了两个方法:send 和 recv(表示 receive)。要发送数据，可调用方 法 send 并提供一个字符串;要接收数据，可调用 recv 并指定最多接收多少个字节的数据。如果不 确定该指定什么数字，1024 是个不错的选择。

## urllib 和 urllib2

在可供使用的网络库中，urllib 和 urllib2 可能是投入产出比最高的两个。它们让你能够通 过网络访问文件，就像这些文件位于你的计算机中一样。只需一个简单的函数调用，就几乎可将 统一资源定位符(URL)可指向的任何动作作为程序的输入。想想将这种功能与模块 re 结合起来 使用都能做什么吧!你可下载网页、从中提取信息并自动生成研究报告。
模块 urllib 和 urllib2 的功能差不多，但 urllib2 更好一些。对于简单的下载，urllib 绰绰有 余。如果需要实现 HTTP 身份验证或 Cookie，抑或编写扩展来处理自己的协议，urllib2 可能是更 好的选择。
