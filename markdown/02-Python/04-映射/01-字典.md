# 字典

<div class="flex flex-row bg-gray-300 gap-2 w-60 justify-between">
    <div class="flex flex-col bg-cyan-500/40 p-4">
        <h6 class="text-center">列表<br/>（序列）</h6>
        <table>
            <tr>
                <td>键</td>
                <td>值</td>
            </tr>
            <tr>
                <td>0</td>
                <td>白展堂</td>
            </tr>
            <tr>
                <td>1</td>
                <td>佟湘玉</td>
            </tr>
            <tr>
                <td>2</td>
                <td>吕轻侯</td>
            </tr>
            <tr>
                <td>3</td>
                <td>李秀莲</td>
            </tr>
        </table>
    </div>
    <div class="flex flex-col bg-sky-500/40 p-4">
        <h6 class="text-center">字典<br/>（映射）</h6>
        <table>
            <tr>
                <td>键</td>
                <td>值</td>
            </tr>
            <tr>
                <td>跑堂</td>
                <td>白展堂</td>
            </tr>
            <tr>
                <td>掌柜</td>
                <td>佟湘玉</td>
            </tr>
            <tr>
                <td>账房</td>
                <td>吕轻侯</td>
            </tr>
            <tr>
                <td>厨师</td>
                <td>李秀莲</td>
            </tr>
        </table>
    </div>
</div>

序列：通过编号访问各个值；  
映射：通过名称来访问各个值。

字典是 Python 中唯一的内置映射类型。

## 创建

```python3
stuff = {'跑堂': '白展堂', '掌柜': '佟湘玉', '账房': '吕轻侯'}
```

字典由键及其相应的值组成，这种键值对称为**项**。

没有任何项的字典叫做空字典：

```python3
stuff = {}
```

键必须唯一，值可以重复：

```python3
stuff = {'跑堂': '白展堂', '保安':'白展堂', '掌柜': '佟湘玉', '账房': '吕轻侯'}
```

## 函数 dict

使用函数 dict 从其他映射或序列创建字典：

<div class="run"></div>

```python3
items = [('name', '白展堂'), ('age', 24)]
d = dict(items)
print(d)
print(d['name'])
```

也可以这样：

<div class="run"></div>

```python3
d = dict(name='白展堂', age=24)
print(d)
```

## 基本操作

| 操作     | 结果                        |
| -------- | --------------------------- |
| len(d)   | 返回 d 包含的项数           |
| d[k]     | 返回与键 k 相关联的值       |
| d[k] = v | 将 v 关联到键 k             |
| del d[k] | 删除键为 k 的项             |
| k in d   | 检查字典是否包含键为 k 的项 |

字典与列表的不同之处：

|          | 字典                                   | 列表                         |
| -------- | -------------------------------------- | ---------------------------- |
| 键的类型 | 不可变的类型，如：浮点数、字符串、元组 | 整数                         |
| 自动添加 | 可以给没有的键赋值                     | 必须用 append 或类似方法赋值 |
| 成员资格 | k in d 查找的是键                      | v in l 查找的是值            |

> 相比于检查列表是否包含指定的值，检查字典是否包含指定的键效率更高。

给不存在的键赋值，相当于增加这个键：

<div class="run"></div>

```python3
x = {}
x[42] = 'Foobar'
print(x)
```

## clear

删除所有的字典项，就地执行。

<div class="run"></div>

```python3
>>> d = {}
>>> d['name'] = 'Gumby'
>>> d['age'] = 42
>>> d
{'age': 42, 'name': 'Gumby'} >>> returned_value = d.clear() >>> d
{}
>>> print(returned_value)
None
```

## copy

返回一个新字典（浅复制）。

<div class="run"></div>

```python3
>>> x = {'username': 'admin', 'machines': ['foo', 'bar', 'baz']}
>>> y = x.copy()
>>> y['username'] = 'mlh'
>>> y['machines'].remove('bar')
>>> y
{'username': 'mlh', 'machines': ['foo', 'baz']}
>>> x
{'username': 'admin', 'machines': ['foo', 'baz']}
```

替换副本中的值，原件不受影响；
但是就地修改副本的值，原件也将发生变化。

为了避免这种问题，一种办法是执行**深复制**，即同时复制值及其包含的所有值。

```python3
>>> from copy import deepcopy
>>> d = {}
>>> d['names'] = ['Alfred', 'Bertrand']
>>> c = d.copy()
>>> dc = deepcopy(d)
>>> d['names'].append('Clive')
>>> c
{'names': ['Alfred', 'Bertrand', 'Clive']}
>>> dc
{'names': ['Alfred', 'Bertrand']}
```

## fromkeys

创建一个新字典，其中包含指定的键，且每个键对应的值都是 None。

```python3
>>> {}.fromkeys(['name', 'age'])
{'age': None, 'name': None}
```

这个示例首先创建了一个空字典，再调用方法 fromkeys 来创建另一个字典。

也可以这样：

```python3
>>> dict.fromkeys(['name', 'age'])
{'age': None, 'name': None}
```

也可以提供特定的值：

```python3
>>> dict.fromkeys(['name','age'], '(unknown)')
{'age':'(unknown)','name':'(unknown)'}
```
