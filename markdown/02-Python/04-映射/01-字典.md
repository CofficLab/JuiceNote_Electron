# 字典

列表适用于通过编号访问各个值的情况，通过名称来访问各个值的数据结构称为映射(mapping)。

字典是 Python 中唯一的内置映射类型，其中的值不按顺序排列，而是存储在键下。键可能是数、字符串或元组。

假设有如下名单：

```python3
>>> names = ['Alice', 'Beth', 'Cecil', 'Dee-Dee', 'Earl']
```

如果要创建一个数据库，存储这些人的电话号码，该如何办呢?

一种办法是再创建一个列表。假设只存储四位的分机号，这个列表将类似于:

```python3
>>> numbers = ['2341', '9102', '3158', '0142', '5551']
```

创建这些列表后，就可像下面这样查找 Cecil 的电话号码:

```python3
>>> numbers[names.index('Cecil')]
'3158'
```

这可行，但不太实用。

如果 phonebook 是个字典，可以这样用：

```python3
>>> phonebook['Cecil']
'3158'
```

## 创建和使用字典

字典以类似于下面的方式表示:

```python3
phonebook = {'Alice': '2341', 'Beth': '9102', 'Cecil': '3258'}
```

字典由键及其相应的值组成，这种键值对称为项(item)。

没有任何项的字典叫做空字典：

```python3
{}
```

> 在字典（以及其他映射类型）中，键必须是独一无二的，值无需如此。

## dict

使用函数 dict 从其他映射或序列创建字典：

```python3
>>> items = [('name', 'Gumby'), ('age', 42)]
>>> d = dict(items)
>>> d
{'age': 42, 'name': 'Gumby'}
>>> d['name']
'Gumby'
```

也可以这样：

```python3
>>> d = dict(name='Gumby', age=42)
>>> d
{'age': 42, 'name': 'Gumby'}
```

## 基本操作

字典的基本行为类似于序列。

| 操作     | 结果                        |
| -------- | --------------------------- |
| len(d)   | 返回 d 包含的项数           |
| d[k]     | 返回与键 k 相关联的值       |
| d[k] = v | 将 v 关联到键 k             |
| del d[k] | 删除键为 k 的项             |
| k in d   | 检查字典是否包含键为 k 的项 |

字典与列表的不同之处：

|          | 字典                                   | 列表                         |
| -------- | -------------------------------------- | ---------------------------- |
| 键的类型 | 不可变的类型，如：浮点数、字符串、元组 | 整数                         |
| 自动添加 | 可以给没有的键赋值                     | 必须用 append 或类似方法赋值 |
| 成员资格 | k in d 查找的是键                      | v in l 查找的是值            |

> 相比于检查列表是否包含指定的值，检查字典是否包含指定的键效率更高。

字典还有一个优点：

```python3
>>> x = []
>>> x[42] = 'Foobar'
Traceback (most recent call last):
File "<stdin>", line 1, in ?
IndexError: list assignment index out of range >>> x = {}
>>> x[42] = 'Foobar'
>>> x
{42: 'Foobar'}
```

## clear

删除所有的字典项，就地执行。

```python3
>>> d = {}
>>> d['name'] = 'Gumby'
>>> d['age'] = 42
>>> d
{'age': 42, 'name': 'Gumby'} >>> returned_value = d.clear() >>> d
{}
>>> print(returned_value)
None
```

## copy

返回一个新字典（浅复制）。

```python3
>>> x = {'username': 'admin', 'machines': ['foo', 'bar', 'baz']}
>>> y = x.copy()
>>> y['username'] = 'mlh'
>>> y['machines'].remove('bar')
>>> y
{'username': 'mlh', 'machines': ['foo', 'baz']}
>>> x
{'username': 'admin', 'machines': ['foo', 'baz']}
```

替换副本中的值，原件不受影响；
但是就地修改副本的值，原件也将发生变化。

为了避免这种问题，一种办法是执行**深复制**，即同时复制值及其包含的所有值。

```python3
>>> from copy import deepcopy
>>> d = {}
>>> d['names'] = ['Alfred', 'Bertrand']
>>> c = d.copy()
>>> dc = deepcopy(d)
>>> d['names'].append('Clive')
>>> c
{'names': ['Alfred', 'Bertrand', 'Clive']}
>>> dc
{'names': ['Alfred', 'Bertrand']}
```

## fromkeys

创建一个新字典，其中包含指定的键，且每个键对应的值都是 None。

```python3
>>> {}.fromkeys(['name', 'age'])
{'age': None, 'name': None}
```

这个示例首先创建了一个空字典，再调用方法 fromkeys 来创建另一个字典。

也可以这样：

```python3
>>> dict.fromkeys(['name', 'age'])
{'age': None, 'name': None}
```

也可以提供特定的值：

```python3
>>> dict.fromkeys(['name','age'], '(unknown)')
{'age':'(unknown)','name':'(unknown)'}
```
