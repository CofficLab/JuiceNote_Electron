# 异常与函数

异常和函数有着天然的联系。如果不处理函数中引发的异常，它将向上传播到调用函数的地 方。如果在那里也未得到处理，异常将继续传播，直至到达主程序(全局作用域)。如果主程序 中也没有异常处理程序，程序将终止并显示栈跟踪消息。来看一个示例:

```python3
>>> def ...
...
>>> def ...
...
>>> def ...
...
...
...
...
>>> ignore_exception()
Traceback (most recent call last):
faulty():
raise Exception('Something is wrong')
ignore_exception(): faulty()
handle_exception(): try:
faulty() except:
File '<stdin>', line File '<stdin>', line File '<stdin>', line
1, in ?
2, in ignore_exception 2, in faulty
print('Exception handled')
Exception: Something is wrong >>> handle_exception() Exception handled
```

如你所见，faulty 中引发的异常依次从 faulty 和 ignore_exception 向外传播，最终导致显示 一条栈跟踪消息。调用 handle_exception 时，异常最终传播到 handle_exception，并被这里的 try/except 语句处理。

<script>
function run(target) {
    if (window.runner == undefined) {
        alert('在APP版本中才可以运行')
        return
    }

    if (target.innerHTML == '收起') {
        target.innerHTML = '运行'
        target.parentElement.getElementsByTagName('pre').item(0).style.display = 'none'
    } else {
        target.innerHTML = '收起'
        code = target.parentElement.parentElement.getElementsByTagName('code').item(0).innerText
        result = window.runner(code,'python')
        target.parentElement.getElementsByTagName('code').item(0).innerHTML = result
        target.parentElement.getElementsByTagName('pre').item(0).style.display = 'block'
    }
}
</script>
