# 字符串

字符串就是一串字符。

<div class="flex justify-start gap-1">
  <div class="bg-sky-500 dark:bg-sky-800 w-8 h-8 rounded text-center">...</div>
  <div class="bg-sky-500 dark:bg-sky-800 w-8 h-8 rounded text-center">H</div>
  <div class="bg-sky-500 dark:bg-sky-800 w-8 h-8 rounded text-center">E</div>
  <div class="bg-sky-500 dark:bg-sky-800 w-8 h-8 rounded text-center">L</div>
  <div class="bg-sky-500 dark:bg-sky-800 w-8 h-8 rounded text-center">L</div>
  <div class="bg-sky-500 dark:bg-sky-800 w-8 h-8 rounded text-center">O</div>
  <div class="bg-sky-500 dark:bg-sky-800 w-8 h-8 rounded text-center">...</div>
</div>

上面 5 个字符组成了一个字符串。

在内存中，这 5 个字符的存储也大致如上图所示，它们紧紧的贴在一起。

看这个样子，我们很容易想到，它们在一起就是一个序列。

## 基本操作

<div class="flex justify-start gap-1">
  <div class="bg-cyan-500 dark:bg-cyan-800 w-10 h-8 rounded text-center">索引</div>
  <div class="bg-cyan-500 dark:bg-cyan-800 w-10 h-8 rounded text-center">切片</div>
  <div class="bg-cyan-500 dark:bg-cyan-800 w-10 h-8 rounded text-center">乘法</div>
  <div class="bg-cyan-500 dark:bg-cyan-800 w-28 h-8 rounded text-center">成员资格检查</div>
  <div class="bg-cyan-500 dark:bg-cyan-800 w-10 h-8 rounded text-center">长度</div>
  <div class="bg-cyan-500 dark:bg-cyan-800 w-14 h-8 rounded text-center">最小值</div>
  <div class="bg-cyan-500 dark:bg-cyan-800 w-14 h-8 rounded text-center">最大值</div>
  <div class="bg-red-500 dark:bg-red-900 w-20 h-8 rounded text-center">元素赋值</div>
  <div class="bg-red-500 dark:bg-red-900 w-20 h-8 rounded text-center">切片赋值</div>
</div>

大多数序列操作都适用于字符串，但字符串不可变，因此 **元素赋值** 和 **切片赋值** 是非法的。

<div x-data>
    <pre><code class="language-python3" x-ref="code">str = 'HELLO'
str[1:] = 'F'</code></pre>
    <div class="flex justify-end">
        <div class="btn" x-show="window.runner != undefined" x-on:click="$store.r1=window.runner($refs.code.innerText,'python')">运行</div>
    </div>
</div>

<div x-data x-show="$store.r1 != ''">
<pre>
    <code x-html="$store.r1" class="mt-2"></code>
</pre>
</div>

<div class="flex justify-start gap-1">
  <div class="bg-sky-500 dark:bg-sky-800 w-8 h-8 rounded text-center">...</div>
  <div class="bg-red-500 dark:bg-red-800 w-8 h-8 rounded text-center">F</div>
  <div class="bg-sky-500 dark:bg-sky-800 w-8 h-8 rounded text-center">E</div>
  <div class="bg-sky-500 dark:bg-sky-800 w-8 h-8 rounded text-center">L</div>
  <div class="bg-sky-500 dark:bg-sky-800 w-8 h-8 rounded text-center">L</div>
  <div class="bg-sky-500 dark:bg-sky-800 w-8 h-8 rounded text-center">O</div>
  <div class="bg-sky-500 dark:bg-sky-800 w-8 h-8 rounded text-center">...</div>
</div>

想改其中的内容，是不可以的。

> 多思考底层逻辑，不要我说什么就信什么

## 设置字符串的格式

<div class="flex justify-start gap-1">
  <div class="bg-sky-500 dark:bg-sky-800 w-8 h-8 rounded text-center">...</div>
  <div class="bg-yellow-500 dark:bg-yellow-800 w-10 h-8 rounded text-center">占位</div>
  <div class="bg-sky-500 dark:bg-sky-800 w-8 h-8 rounded text-center">E</div>
  <div class="bg-sky-500 dark:bg-sky-800 w-8 h-8 rounded text-center">L</div>
  <div class="bg-sky-500 dark:bg-sky-800 w-8 h-8 rounded text-center">L</div>
  <div class="bg-yellow-500 dark:bg-yellow-800 w-10 h-8 rounded text-center">占位</div>
  <div class="bg-sky-500 dark:bg-sky-800 w-8 h-8 rounded text-center">...</div>
</div>

<div class="flex justify-start gap-1 mt-2">
  <div class=" w-8 h-8 rounded text-center"></div>
  <div class="bg-green-500 dark:bg-green-800 w-10 h-8 rounded text-center">填写</div>
  <div class="w-8 h-8 rounded text-center"></div>
  <div class="w-8 h-8 rounded text-center"></div>
  <div class="w-8 h-8 rounded text-center"></div>
  <div class="bg-green-500 dark:bg-green-800 w-10 h-8 rounded text-center">填写</div>
  <div class="w-8 h-8 rounded text-center"></div>
</div>

```python3
>>> format = "Hello, %s. %s enough for you?"
>>> values = ('world', 'Hot')
>>> format % values
'Hello, world. Hot enough for ya?'
```

上述格式字符串中的%s 称为转换说明符，指出了要将值插入什么地方。s 意味着将值视为字 符串进行格式设置。如果指定的值不是字符串，将使用 str 将其转换为字符串。其他说明符将导 致其他形式的转换。例如，%.3f 将值的格式设置为包含 3 位小数的浮点数。
这种格式设置方法现在依然管用，且依然活跃在众多代码中，因此你很可能遇到。

> 聪明的懒人促进了世界的发展

可能遇到 的另一种解决方案是所谓的模板字符串。它使用类似于 UNIX shell 的语法，旨在简化基本的格式 设置机制，如下所示:

```python3
>>> from string import Template
>>> tmpl = Template("Hello, $who! $what enough for ya?") >>> tmpl.substitute(who="Mars", what="Dusty")
'Hello, Mars! Dusty enough for ya?'
```

包含等号的参数称为关键字参数，第 6 章将详细介绍这个术语。在字符串格式设置中，可将 关键字参数视为一种向命名替换字段提供值的方式。
编写新代码时，应选择使用字符串方法 format，它融合并强化了早期方法的优点。使用这种 方法时，每个替换字段都用花括号括起，其中可能包含名称，还可能包含有关如何对相应的值进 行转换和格式设置的信息。
在最简单的情况下，替换字段没有名称或将索引用作名称。

```python3
>>> "{}, {} and {}".format("first", "second", "third") 'first, second and third'
>>> "{0}, {1} and {2}".format("first", "second", "third") 'first, second and third'
```

然而，索引无需像上面这样按顺序排列。

```python3
>>> "{3} {0} {2} {1} {3} {0}".format("be", "not", "or", "to") 'to be or not to be'
```

命名字段的工作原理与你预期的完全相同。

```python3
>>> from math import pi
>>> "{name} is approximately {value:.2f}.".format(value=pi, name="π") 'π is approximately 3.14.'
```

当然，关键字参数的排列顺序无关紧要。在这里，我还指定了格式说明符.2f，并使用冒号 将其与字段名隔开。它意味着要使用包含 2 位小数的浮点数格式。如果没有指定.2f，结果将如下:

```python3
>>> "{name} is approximately {value}.".format(value=pi, name="π") 'π is approximately 3.141592653589793.'
```

最后，在 Python 3.6 中，如果变量与替换字段同名，还可使用一种简写。在这种情况下，可 使用 f 字符串——在字符串前面加上 f。

```python3
>>> from math import e
>>> f"Euler's constant is roughly {e}."
"Euler's constant is roughly 2.718281828459045."
```

在这里，创建最终的字符串时，将把替换字段 e 替换为变量 e 的值。这与下面这个更明确一些 的表达式等价:

```python3
>>> "Euler's constant is roughly {e}.".format(e=e)

"Euler's constant is roughly 2.718281828459045."
```

## center

在两边填充字符，让字符串居中。

<div x-data>
    <pre><code class="language-python3" x-ref="code">
str = "--" + "The Middle by Jimmy Eat World".center(39) + "--"
print(str)
    </code></pre>
    <div class="flex justify-end">
        <div class="btn" x-show="window.runner != undefined" x-on:click="$store.r1=window.runner($refs.code.innerText,'python')">运行</div>
    </div>
</div>

<div x-data>
    <pre><code class="language-python3" x-ref="code">
str = "The Middle by Jimmy Eat World".center(39, "*")
print(str)
    </code></pre>
    <div class="flex justify-end">
        <div class="btn" x-show="window.runner != undefined" x-on:click="$store.r1=window.runner($refs.code.innerText,'python')">运行</div>
    </div>
</div>

<div x-data x-show="$store.r1 != ''">
<pre>
    <code x-html="$store.r1" class="mt-2"></code>
</pre>
</div>

## find

在字符串中查找子串。如果找到，就返回子串的第一个字符的索引，否则返回：-1。

## join

合并序列的元素。

## lower

返回字符串的小写版本。

## replace

将指定的子串替换为另外一个字符串，并返回替换后的结果。

## split

与 join 相反，用于将字符串拆分为序列。

## strip

将字符串开头和末尾的空白删除，并返回删除后的结果。

## translate

方法 translate 与 replace 一样替换字符串的特定部分，但不同的是它只能进行单字符替换。 这个方法的优势在于能够同时替换多个字符，因此效率比 replace 高。

## 判断是否条件

很多字符串方法都以 is 打头，如 isspace、isdigit 和 isupper，它们判断字符串是否具有特定的性质(如包含的字符全为空白、数字或大写)。如果字符串具备特定的性质，这些方法就返回 True，否则返回 False。

| 方法         | 作用 |
| ------------ | ---- |
| isalnum      |      |
| isalpha      |      |
| isdecimal    |      |
| isdigit      |      |
| isidentifier |      |
| islower      |      |
| isnumeric    |      |
| isprintable  |      |
| isspace      |      |
| istitle      |      |
| isupper      |      |

<script>
window.document.addEventListener('alpine:init', () => {
    Alpine.store('r1', '')
    Alpine.store('r2', '')
    Alpine.store('r3', '')
})

window.Alpine.start()
</script>

<script>
window.document.addEventListener('alpine:init', () => {
    Alpine.store('r1', '')
    Alpine.store('r2', '')
    Alpine.store('r3', '')
})

window.Alpine.start()
</script>
