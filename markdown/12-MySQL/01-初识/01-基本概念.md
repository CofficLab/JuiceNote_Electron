# 基本概念

## database

表示数据库系统中的某一级存储单位。

database 可以比作一个国家。

## schema

database 的下一层逻辑结构，是一个独立命名空间内的一组相关数据库对象的集合。

schema 可以比作一个省。

在创建新的 database 时，PostgreSQL 会自动为其创建一个名为 `public` 的 schema。

## table（表）

schema 的下一层逻辑结构。

在任何一个数据库中，表都是最核心的对象类型。

PostgreSQL 的表支持两种强大的功能：

- 继承，一张表可以有父表和子表
- 创建表的同时，系统会自动为此表创建一种对应的自定义数据类型

## view（视图）

大多数关系型数据库都支持视图。

视图是基于表的一种抽象，通过它可以实现一次性查询多张表，也可以实现通过复杂运算来构造出虚拟字段。

视图一般是只读的，但 PostgreSQL 支持对视图数据进行修改，前提是该视图基于单张实体表构建。

## 扩展包

开发人员可以通过该机制将一组相关的函数、数据类型、数据类型转换器、用户自定义索引、表以及属性变量等对象打包成一个功能扩展包，该扩展包可以整体安装和删除。

## 函数

用户可以编写自定义函数来对数据进行新增、修改、删除和复杂计算等操作，可以使用 PostgreSQL 所支持的各种过程式语言来编码。

函数支持返回以下数据类型：

- 标量值（也就是单个值）
- 数组
- 单条记录
- 记录集

其他数据库把对数据进行增删改操作的函数称为“存储过程”，把不进行增删改的函数叫做“函数”，但 PostgreSQL 中并不区分，统称为“函数”。

## 内置编程语言

默认支持三种：

- SQL
- PL/pgSQL
- C 语言

可以通过`CREATE EXTENSION`或者`CREATE PRODCEDURAL LANGUAGE`来添加其他语言。

## 运算符

运算符本质上是以简单符号形式呈现的函数别名。

## 外部表和外部数据封装器

外部表是一些虚拟表，通过它们可以直接在本地数据库中访问来自外部数据源的数据。只要数据映射关系配置正确，外部表的用法就与普通表没有任何区别。外部表支持映射到以下类型的数据源：CSV 文件、另一个服务器上的 PostgreSQL 表、SQL Server 或 Oracle 这些异构数据库中的表、Redis 这样的 NoSQL 数据库，甚至像 Twitter 或 Salesforce 这样的 Web 服务。
　　外部表映射关系的建立是通过配置外部数据封装器（foreign data wrapper，FDW）实现的。FDW 是 PostgreSQL 和外部数据源之间的一架“魔法桥”，可实现两边数据的互联互通。其内部实现机制遵循 SQL 标准中的 MED（Management of External Data）规范，更多细节请参考维基百科上关于 MED 的描述。

## 触发器和触发器函数

触发器机制可以侦测到数据修改事件的发生。

## catalog

catalog 是系统级的 schema，用于存储系统函数和系统元数据。

每个 database 创建好以后默认都会含有两个 catalog：

- `pg_catalog`
- `information_schema`

## 类型

类型是数据类型的简称。

## 全文检索

一种基于自然语言的搜索机制。

## 数据类型转换器

将一种数据类型转换为另一种。

## 序列号生成器

用于实现 `serial` 数据类型值的自动递增分配。

## 规则

在一个 SQL 执行前对其进行改写。
