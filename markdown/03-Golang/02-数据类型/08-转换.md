# 转换

Go 要求在程序运行前就要明确数据的类型，使用了错误的类型会报错。

这时候，可以转换类型。

## 类型断言

类型断言（Type Assertion）是一个使用在接口值上的操作，用于检查接口类型变量所持有的值是否实现了期望的接口或者具体的类型。

<div class="run"></div>

```go
package main
import "fmt"
import "reflect"

func main() {
    var a interface{} = 10

    b,_ := a.(int)
    c,_ := a.(float64)

    fmt.Println(reflect.TypeOf(b), b)
    fmt.Println(reflect.TypeOf(c), c)
}
```

## 强制类型转换

<div class="run"></div>

```go
package main
import "fmt"
import "reflect"

func main() {
    var a float32 = 45.6
    var b = float32(a)

    fmt.Println(reflect.TypeOf(b), b)
}
```

## 指针类型转换

```go
var a int = 100
var p *int = &a
var c *int64

c = (*int64)(p)
```

这样编译器会报错，正确做法：

```go
package main
import "fmt"
import "unsafe"

func main() {
    var a int = 100
    var p *int = &a
    var c *int64 = (*int64)(unsafe.Pointer(b))

    fmt.Println(*c)
}
```

## 无损转换

<div class="run"></div>

```go
package main
import "fmt"
import "reflect"

func main() {
    a := 3
    b := float64(a)

    fmt.Println(reflect.TypeOf(a))
    fmt.Println(reflect.TypeOf(b))

    fmt.Println(a)
    fmt.Println(b)
}
```

## 有损转换

<div class="run"></div>

```go
package main
import "fmt"
import "reflect"

func main() {
    a := 3.5
    b := int(a)

    fmt.Println(reflect.TypeOf(a))
    fmt.Println(reflect.TypeOf(b))

    fmt.Println(a)
    fmt.Println(b)
}
```

## 字符串转换为数值

<div class="run"></div>

```go
package main
import "fmt"
import "reflect"
import "strconv"

func main() {
    a := "3.5"
    b,_ := strconv.ParseFloat(a, 64)

    fmt.Println(reflect.TypeOf(a))
    fmt.Println(reflect.TypeOf(b))

    fmt.Println(a)
    fmt.Println(b)
}
```
