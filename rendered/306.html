<h1>文件操作</h1>
<p>&lt;div class=&quot;flex justify-start gap-1&quot;&gt;
&lt;div class=&quot;brick w-36 h-8&quot;&gt;创建&lt;/div&gt;
&lt;div class=&quot;brick w-36 h-8&quot;&gt;查看属性&lt;/div&gt;
&lt;div class=&quot;brick-red w-36 h-8&quot;&gt;删除&lt;/div&gt;
&lt;div class=&quot;brick w-36 h-8&quot;&gt;打开&lt;/div&gt;
&lt;div class=&quot;brick w-36 h-8&quot;&gt;读取&lt;/div&gt;
&lt;div class=&quot;brick w-36 h-8&quot;&gt;写入&lt;/div&gt;
&lt;div class=&quot;brick w-36 h-8&quot;&gt;关闭&lt;/div&gt;
&lt;/div&gt;</p>
<p>常见的操作有以上几种。</p>
<h2>运行平台</h2>
<p>&lt;div class=&quot;bg-cyan flex flex-col gap-2 pt-4&quot;&gt;
&lt;div class=&quot;bg-red flex flex-row gap-2 items-end&quot;&gt;
&lt;div class=&quot;flex flex-col w-3/5 gap-1&quot;&gt;
&lt;div class=&quot;flex flex-row gap-4 justify-center&quot;&gt;
&lt;div class=&quot;brick px-2&quot;&gt;程序1&lt;/div&gt;
&lt;div class=&quot;brick px-2&quot;&gt;程序2&lt;/div&gt;
&lt;div class=&quot;brick px-2&quot;&gt;程序n&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;bg-sky w-full text-center py-2&quot;&gt;
Node.js&lt;br/&gt;
&lt;span class=&quot;text-sm&quot;&gt;让桌面操作系统支持 JavaScript 的平台&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;flex flex-col w-3/5 gap-1&quot;&gt;
&lt;div class=&quot;flex flex-row gap-4 justify-center&quot;&gt;
&lt;div class=&quot;brick px-2&quot;&gt;程序1&lt;/div&gt;
&lt;div class=&quot;brick px-2&quot;&gt;程序2&lt;/div&gt;
&lt;div class=&quot;brick px-2&quot;&gt;程序n&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;bg-sky w-full text-center py-2&quot;&gt;
浏览器&lt;br/&gt;
&lt;span class=&quot;text-sm&quot;&gt;支持 JavaScript&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;bg-yellow text-center py-4&quot;&gt;
桌面操作系统（Windows、Linux、macOS）&lt;br/&gt;
&lt;span class=&quot;text-sm&quot;&gt;安装 Node.js 后支持 JavaScript &lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;bg-yellow text-center py-4&quot;&gt;计算机&lt;/div&gt;
&lt;/div&gt;</p>
<p>JavaScript 程序既可以和浏览器打交道用于操作网页，也可以通过<code>Node.js</code>这个平台和操作系统打交道。</p>
<h2>创建</h2>
<p>官方文档在这里：</p>
<p>&lt;div class=&quot;link&quot;&gt;https://nodejs.org/api/fs.html#fsmkdirpath-options-callback&lt;/div&gt;</p>
<p>创建文件夹：</p>
<pre><code class="language-JavaScript">import { mkdir } from &quot;node:fs&quot;;

// Creates /tmp/a/apple, regardless of whether `/tmp` and /tmp/a exist.
mkdir(&quot;/tmp/a/apple&quot;, { recursive: true }, (err) =&gt; {
  if (err) throw err;
});
</code></pre>
<h2>查看属性</h2>
<h3>查看文件信息</h3>
<p>官方文档在这里：</p>
<p>&lt;div class=&quot;link&quot;&gt;https://nodejs.org/api/fs.html#class-fsstats&lt;/div&gt;</p>
<p>&lt;div class=&quot;run&quot;&gt;&lt;/div&gt;</p>
<pre><code class="language-JavaScript">import { Stats } from &quot;node:fs&quot;;

Stats(&quot;/tmp/a/apple&quot;, { recursive: true }, (err) =&gt; {
  if (err) throw err;
});
</code></pre>
<h3>查看文件列表</h3>
<p>&lt;div class=&quot;run&quot;&gt;&lt;/div&gt;</p>
<pre><code class="language-python">import os

currentWorkFolder = os.getcwd()

print('当前工作目录是：' + currentWorkFolder)
print('文件列表是：')
print(os.listdir(currentWorkFolder))
</code></pre>
<h2>删除</h2>
<h3>删除一个文件</h3>
<pre><code class="language-python">os.unlink(path)
</code></pre>
<h3>删除空文件夹</h3>
<pre><code class="language-python">os.rmdir(path)
</code></pre>
<h3>删除文件夹</h3>
<p>删除文件夹以及其内容，不管是否为空：</p>
<pre><code class="language-python">import shutil

shutil.rmtree(path)
</code></pre>
<p>文件夹会被彻底删除，不会到回收站，这是一个非常危险的操作。</p>
<h3>安全删除</h3>
<p>使用第三方模块，可以将被删除的文件或文件夹放入回收站。</p>
<pre><code class="language-python">import send2trash

send2trash.send2trash(path)
</code></pre>
<h2>打开</h2>
<p>函数 open 用来打开文件：</p>
<pre><code class="language-python">f = open('names.txt')
</code></pre>
<p>如果文件位于其他地方，可指定完整的路径。</p>
<p>如果指定的文件不存在，将抛出异常:</p>
<p>&lt;div class=&quot;run&quot;&gt;&lt;/div&gt;</p>
<pre><code class="language-python">f = open('/a_file_that_not_exists.txt')
</code></pre>
<p>为了保证程序的健壮性，我们应捕获异常。</p>
<h2>读取</h2>
<p>读取的前提是文件已经打开，可以指定读取多少个字符，也可以全部读取:</p>
<p>&lt;div class=&quot;run&quot;&gt;&lt;/div&gt;</p>
<pre><code class="language-python">f = open('tmp.txt','r')

# 读取 4 个字符
print(f.read(4))

# 读取剩下的全部
print(f.read())
</code></pre>
<h2>写入</h2>
<p>写入的前提是文件已经打开：</p>
<p>&lt;div class=&quot;run&quot;&gt;&lt;/div&gt;</p>
<pre><code class="language-python"># 打开文件
f = open('tmp.txt', 'w')

# 写入然后关闭
f.write('Hello, ')
f.write('World!')
f.close()

# 重新打开并检查刚才写入的内容
f = open('tmp.txt', 'r')
print(f.read())
</code></pre>
<h2>关闭</h2>
<p><code>f.close()</code> 即表示关闭文件。</p>
